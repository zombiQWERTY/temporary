Внимание
========
Сейчас в проекте есть папка python_shared_packages
ее потом надо удалить, и наладить подключение пакета через pip. Пока я так
не сделал, нужно испытать в работе.

Directory-service
=================
Сервис обслуживающий папки в БД. 
Может выполнять следующие задачи:

1. Создание папок в БД.
2. Удаление папок из БД.
3. Изменение существующих папок.
4. Сообщает список папок имеющихся в системе, с краткой информацией по каждой.
5. Сообщает подробный информации по каждой из папок.
6. Добавление вложений к имеющимся папкам.
7. Удаление вложений у имеющейся папки.

Есть простое описание в swagger, по адресу:
http://127.0.0.1:8090/api/doc. Более подробно формат нужно посмотреть в jmeter 
файле **doc/DOQA.jmx**
 
Папки проекта
-------------
Есть следующие папки:

- **doc** - папка с документацией;
- **source** - исходный код на python
  
Обращение к API
---------------
Обращение ко всем фукнциям начинается с **host:8090/api/v1/**. Например:
http://127.0.0.1:8090/api/dir_list. 
Подробно работу ручек можно посмотреть в jmeter проекте doc/DOQA.jmx

Развертывание проекта
---------------------

Локально
********
Для локального развертывания нужно:
   1. python 3.7 или выше.
   2. установить зависимости: ``pip install -r requirements.txt``
   3. обеспечить с машины доступ к консулу (параметры указываются в строке запуска), 
   в консуле должны быть подготовлены БД и ключи с паролем и логином: 
   ``
    "POSTGRES_SERVICE_NAME": "postgres_directory_service",
    "POSTGRES_USER_KEY": "postgres_directory_service/user",
    "POSTGRES_PASSWORD_KEY": "postgres_directory_service/password"
    ``
   4. запускать ``python3 main.py consul.doqa.local 80``. Для справки: ``python3 main.py --help``.
если это делается не на виртуальной машине, то желательно создать окружение
env, чтобы зависимости не конфликтовали с системными.

В докере
********
Для запуска в докере есть файл ``Dockerfile``

Запуск тестов
=============
1. Прицелится в нужный сервер ``constant/setting.py``, раздел **tests**
2. Запустить все тесты  ``pytest tests/``
3. Запустить один тест ``pytest -q tests/test_version.py``

